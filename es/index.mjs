import{applyMiddleware as p,createStore as t}from"redux";import{connect as r}from"react-redux";import{composeWithDevTools as e}from"redux-devtools-extension";function o(r,o,n,s){let a;return a=s?p(...s,({dispatch:p})=>t=>r=>{t(r),"SET_PROP_ASYNC"===r.type&&(p({type:"NOTIFY_SET_PROP_ASYNC",prop:r.prop,status:"start"}),r.func().then(t=>{p({type:"NOTIFY_SET_PROP_ASYNC",prop:r.prop,status:"success"}),p({type:"SET_PROP",prop:r.prop,payload:t})},()=>{p({type:"NOTIFY_SET_PROP_ASYNC",prop:r.prop,status:"error"})}).finally(()=>{p({type:"NOTIFY_SET_PROP_ASYNC",prop:r.prop,status:"end"})}))}):p(({dispatch:p})=>t=>r=>{t(r),"SET_PROP_ASYNC"===r.type&&(p({type:"NOTIFY_SET_PROP_ASYNC",prop:r.prop,status:"start"}),r.func().then(t=>{p({type:"NOTIFY_SET_PROP_ASYNC",prop:r.prop,status:"success"}),p({type:"SET_PROP",prop:r.prop,payload:t})},()=>{p({type:"NOTIFY_SET_PROP_ASYNC",prop:r.prop,status:"error"})}).finally(()=>{p({type:"NOTIFY_SET_PROP_ASYNC",prop:r.prop,status:"end"})}))}),t((function(p,t){if(void 0===p){if(!o)return{};p=o}if("type"in t&&"SET_PROP"===t.type)return function(p,t){return"payload"in t?Object.assign({},p,{[t.prop]:t.payload}):p}(p,t);if("type"in t&&"SET_PROP_ASYNC"===t.type);else if(r)return r(p,t);return p}),!1!==n?e(a):a)}function n(p,t){return r(p,(p,r)=>{let e={};return"function"==typeof t?e=Object.assign({},{...t(p,r)}):t&&t instanceof Object&&(e=Object.assign({},{...t})),{...e,setStateProp:t=>p({type:"SET_PROP",prop:t.prop,payload:t.payload}),setStatePropAsync:t=>p({type:"SET_PROP_ASYNC",prop:t.prop,func:t.func})}})}export{n as connect,o as createStore};
